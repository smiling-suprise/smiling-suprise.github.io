<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <title>Surprise</title>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=ZCOOL+QingKe+HuangYou&family=ZCOOL+XiaoWei&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            touch-action: manipulation;
        }
        
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: url("https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/dx/Â§ßË±°ËÉåÊôØ.jpg") no-repeat center center;
            background-size: cover;
            font-family: 'Arial Rounded MT Bold', 'Helvetica Rounded', Arial, sans-serif;
            position: relative;
        }
        
        .container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .gift-box {
            position: relative;
            width: min(400px, 90vw);
            height: min(400px, 90vw);
            cursor: pointer;
            transition: transform 0.8s ease;
            filter: drop-shadow(0 15px 30px rgba(0, 0, 0, 0.5));
        }
        
        .gift-box:hover {
            transform: scale(1.05);
        }
        
        .box {
            position: absolute;
            width: 100%;
            height: 100%;
            transition: transform 0.8s ease;
        }
        
        .box-body {
            position: absolute;
            width: 100%;
            height: 70%;
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 50%, #e74c3c 100%);
            bottom: 0;
            border-radius: 0 0 8px 8px;
            box-shadow: 
                0 15px 30px rgba(0, 0, 0, 0.4),
                inset 0 -5px 10px rgba(0, 0, 0, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .box-front {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 50%, #e74c3c 100%);
            border-radius: 0 0 8px 8px;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.2);
        }
       
        .lid {
            position: absolute;
            width: 100%;
            height: 30%;
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 50%, #e74c3c 100%);
            top: 0;
            transform-origin: bottom;
            transition: transform 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 10;
            border-radius: 8px 8px 0 0;
            box-shadow: 
                0 -8px 20px rgba(0, 0, 0, 0.4),
                inset 0 5px 10px rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .lid::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 25px;
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 50%, #e74c3c 100%);
            top: -12px;
            border-radius: 8px 8px 0 0;
            box-shadow: 0 -5px 10px rgba(0, 0, 0, 0.3);
        }
        
        .lid::after {
            content: '';
            position: absolute;
            width: 90%;
            height: 5px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            top: 30%;
            left: 5%;
            border-radius: 5px;
        }
        
        .ribbon {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 5;
        }
        
        .ribbon::before, .ribbon::after {
            content: '';
            position: absolute;
            width: min(80px, 20vw);
            height: min(80px, 20vw);
            background: linear-gradient(135deg, #f1c40f 0%, #f39c12 100%);
            border-radius: 50%;
            top: min(-20px, -5vw); 
            z-index: 5;
            transition: all 0.8s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .ribbon::before {
            left: 50%;
            transform: translateX(-50%);
        }
        
        .ribbon::after {
            left: 50%;
            transform: translateX(-50%);
        }
        
        .ribbon-horizontal {
            position: absolute;
            width: 100%;
            height: min(30px, 7.5vw);
            background: linear-gradient(135deg, #f1c40f 0%, #f39c12 100%);
            top: 50%;
            transform: translateY(-50%);
            z-index: 4;
            transition: all 0.8s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        .ribbon-vertical {
            position: absolute;
            width: min(30px, 7.5vw);
            height: 100%;
            background: linear-gradient(135deg, #f1c40f 0%, #f39c12 100%);
            left: 50%;
            transform: translateX(-50%);
            z-index: 4;
            transition: all 0.8s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        .bow {
            position: absolute;
            width: min(120px, 30vw);
            height: min(60px, 15vw);
            background: linear-gradient(135deg, #f1c40f 0%, #f39c12 100%);
            top: min(-15px, -3.75vw); 
            left: 50%;
            transform: translateX(-50%);
            border-radius: 50%;
            z-index: 6;
            transition: all 0.8s ease;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        .bow::before, .bow::after {
            content: '';
            position: absolute;
            width: min(60px, 15vw);
            height: min(60px, 15vw);
            background: linear-gradient(135deg, #f1c40f 0%, #f39c12 100%);
            border-radius: 50%;
            top: min(-15px, -3.75vw);
            transition: all 0.8s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .bow::before {
            left: min(-30px, -7.5vw);
        }
        
        .bow::after {
            right: min(-30px, -7.5vw);
        }
        
        .sparkle {
            position: absolute;
            width: min(8px, 2vw);
            height: min(8px, 2vw);
            background: white;
            border-radius: 50%;
            opacity: 0;
            animation: sparkle 2s infinite;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }
        
        .message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: rgba(255, 255, 255, 0.95);
            padding: min(40px, 5vw) min(60px, 7.5vw);
            border-radius: 20px;
            text-align: center;
            font-size: min(36px, 5vw);
            color: #2c3e50;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            z-index: 20;
            opacity: 0;
            transition: all 0.8s ease 1.5s;
            max-width: 90%;
            font-family: 'Ma Shan Zheng', cursive;
            font-weight: bold;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            border: 3px solid #f1c40f;
        }
        
        .message.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .button-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: rgba(255, 255, 255, 0.95);
            padding: min(40px, 5vw);
            border-radius: 20px;
            text-align: center;
            z-index: 22;
            opacity: 0;
            transition: all 0.8s ease;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            max-width: min(500px, 90vw);
            width: 90%;
        }
        
        .button-container.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .button-title {
            font-size: min(32px, 5vw);
            color: #2c3e50;
            margin-bottom: min(30px, 4vw);
            font-family: 'Ma Shan Zheng', cursive;
            font-weight: bold;
        }
        
        .buttons-wrapper {
            display: flex;
            justify-content: center;
            gap: min(30px, 5vw);
            margin-top: min(20px, 3vw);
        }
        
        .confirm-btn {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            color: white;
            border: none;
            padding: min(15px, 3vw) min(40px, 8vw);
            font-size: min(20px, 4vw);
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Ma Shan Zheng', cursive;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .cancel-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: min(15px, 3vw) min(40px, 8vw);
            font-size: min(20px, 4vw);
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Ma Shan Zheng', cursive;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .confirm-btn:hover, .cancel-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
  
        .cancel-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: rgba(255, 255, 255, 0.95);
            padding: min(30px, 4vw);
            border-radius: 20px;
            text-align: center;
            font-size: min(28px, 4.5vw);
            color: #c0392b;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            z-index: 23;
            opacity: 0;
            transition: all 0.8s ease;
            max-width: 90%;
            font-family: 'Ma Shan Zheng', cursive;
            font-weight: bold;
            letter-spacing: 1px;
            border: 3px solid #c0392b;
        }
        
        .cancel-message.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
     
        .video-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 95%;
            max-width: min(900px, 95vw);
            max-height: min(700px, 85vh);
            z-index: 25;
            opacity: 0;
            transition: all 0.8s ease;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: min(20px, 3vw);
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .video-container.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .video-container video {
            width: 100%;
            height: auto;
            max-height: min(660px, 79vh);
            border-radius: 10px;
            object-fit: contain;
        }

        .light-video-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 95%;
            max-width: min(900px, 95vw);
            max-height: min(700px, 85vh);
            z-index: 25;
            opacity: 0;
            transition: all 0.8s ease;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: min(20px, 3vw);
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .light-video-container.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .light-video-container video {
            width: 100%;
            height: auto;
            max-height: min(660px, 79vh);
            border-radius: 10px;
            object-fit: contain;
            background: transparent;
        }
       
        .cake-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            z-index: 40;
            opacity: 0;
            transition: all 1s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .cake-container.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .cake {
            position: relative;
            width: min(500px, 90vw); 
            height: min(380px, 68vw); 
            display: flex;
            flex-direction: column;
            align-items: center;
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.4));
        }
        
        .cake-top {
            width: min(440px, 79vw);
            height: min(130px, 23vw); 
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            border-radius: 50% 50% 0 0;
            position: relative;
            z-index: 2;
        }
        
        .cake-top::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: min(30px, 5.4vw);
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            border-radius: 50% 50% 0 0;
            filter: brightness(1.1);
        }
        
        .cake-middle {
            width: min(470px, 85vw); 
            height: min(95px, 17vw); 
            background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
            border-radius: 10px;
            margin-top: -5px;
            z-index: 1;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .cake-middle::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: min(25px, 4.5vw); 
            background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
            border-radius: 10px 10px 0 0;
            filter: brightness(1.1);
        }
        
        .cake-bottom {
            width: min(500px, 90vw); 
            height: min(175px, 31.5vw);
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 0 0 20px 20px;
            margin-top: -5px;
            z-index: 0;
            position: relative;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .cake-bottom::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: min(25px, 4.5vw);
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 0 0 20px 20px;
            filter: brightness(1.1);
        }
        
        .cake-decoration {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 3;
        }
        
        .decoration-dot {
            position: absolute;
            width: min(18px, 3.2vw);
            height: min(18px, 3.2vw);
            background: #ff6b6b;
            border-radius: 50%;
            animation: float 3s infinite ease-in-out;
        }
     
        .cake-sparkle {
            position: absolute;
            width: min(10px, 1.8vw);
            height: min(10px, 1.8vw);
            background: white;
            border-radius: 50%;
            opacity: 0;
            animation: cakeSparkle 2s infinite;
            z-index: 6;
        }
        
        @keyframes cakeSparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .candle {
            position: relative;
            width: min(30px, 5.4vw); 
            height: min(120px, 21.6vw);
            background: linear-gradient(to bottom, #ffffff, #f0f0f0);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 4;
        }
        
        .candle.flame::before {
            content: '';
            position: absolute;
            top: min(-35px, -6.3vw);
            left: 50%;
            transform: translateX(-50%);
            width: min(42px, 7.6vw); 
            height: min(65px, 11.7vw);
            background: radial-gradient(ellipse at center, #ffeb3b 0%, #ff9800 60%, #f44336 100%);
            border-radius: 50% 50% 20% 20%;
            box-shadow: 0 0 min(42px, 7.6vw) #ff9800;
            animation: flicker 1.5s infinite alternate;
            z-index: 5;
        }
        
        @keyframes flicker {
            0%, 100% { 
                transform: translateX(-50%) scale(1) rotate(-2deg); 
                opacity: 0.9;
            }
            25% { 
                transform: translateX(-50%) scale(1.05) rotate(0deg); 
                opacity: 1;
            }
            50% { 
                transform: translateX(-50%) scale(1.1) rotate(2deg); 
                opacity: 0.95;
            }
            75% { 
                transform: translateX(-50%) scale(1.05) rotate(0deg); 
                opacity: 1;
            }
        }
        
        .candles-container {
            display: flex;
            justify-content: center;
            position: absolute;
            top: min(-40px, -7.2vw);
            z-index: 5;
        }
        
        .cake-instruction {
            position: absolute;
            top: calc(50% + min(250px, 45vw));
            left: 50%;
            transform: translateX(-50%);
            color: white;
            text-align: center;
            font-size: min(24px, 5vw);
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
            font-family: 'Ma Shan Zheng', cursive;
            font-weight: bold;
            letter-spacing: 1px;
            z-index: 41;
            background: rgba(0, 0, 0, 0.3);
            padding: min(10px, 2vw) min(20px, 4vw);
            border-radius: 10px;
            backdrop-filter: blur(5px);
            transition: opacity 0.5s ease;
            max-width: 90%;
            white-space: nowrap;
            opacity: 0;
        }
        
        .cake-instruction.show {
            opacity: 1;
        }
        
        .confetti {
            position: absolute;
            width: min(12px, 3vw);
            height: min(24px, 6vw);
            background: #f1c40f;
            opacity: 0;
        }
       
        .instructions {
            position: absolute;
            top: calc(50% + min(250px, 62.5vw));
            left: 50%;
            transform: translateX(-50%);
            color: white;
            text-align: center;
            font-size: min(24px, 5vw);
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
            font-family: 'Ma Shan Zheng', cursive;
            font-weight: bold;
            letter-spacing: 1px;
            z-index: 5;
            background: rgba(0, 0, 0, 0.3);
            padding: min(10px, 2vw) min(20px, 4vw);
            border-radius: 10px;
            backdrop-filter: blur(5px);
            transition: opacity 0.5s ease;
            max-width: 90%;
            white-space: nowrap;
        }
   
        .black-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 30;
            opacity: 0;
            transition: opacity 1s ease;
            pointer-events: none;
        }
        
        .black-overlay.show {
            opacity: 1;
        }
  
        .end-message {
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            text-align: center;
            font-size: min(48px, 8vw);
            color: white;
            z-index: 35;
            opacity: 0;
            transition: all 0.8s ease;
            font-family: 'Ma Shan Zheng', cursive;
            font-weight: bold;
            letter-spacing: 3px;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            max-width: 90%;
            padding: 0 20px;
        }
        
        .end-message.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .end-message2 {
            position: absolute;
            top: 60%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            text-align: center;
            font-size: min(60px, 10vw);
            color: #ff6b6b;
            z-index: 35;
            opacity: 0;
            transition: all 0.8s ease;
            font-family: 'Ma Shan Zheng', cursive;
            font-weight: bold;
            letter-spacing: 3px;
            text-shadow: 0 0 30px rgba(255, 107, 107, 0.8);
            max-width: 90%;
            padding: 0 20px;
        }
        
        .end-message2.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .video-call-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: min(50px, 6vw);
            text-align: center;
            z-index: 45;
            opacity: 0;
            transition: all 0.8s ease;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            max-width: min(600px, 95vw);
            width: 95%;
        }
        
        .video-call-container.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .caller-info {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: min(40px, 5vw);
        }
        
        .caller-avatar {
            width: min(100px, 18vw);
            height: min(100px, 18vw);
            background: linear-gradient(135deg, #3498db, #2980b9);
            border-radius: 50%;
            margin-right: min(25px, 5vw);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: min(40px, 7vw);
            font-weight: bold;
        }
        
        .caller-details {
            text-align: left;
        }
        
        .caller-name {
            font-size: min(36px, 6vw);
            color: #2c3e50;
            font-weight: bold;
            margin-bottom: min(8px, 1.5vw);
        }
        
        .call-status {
            font-size: min(22px, 4vw);
            color: #7f8c8d;
        }
        
        .call-buttons {
            display: flex;
            justify-content: center;
            gap: min(40px, 6vw);
            margin-top: min(30px, 4vw);
        }
        
        .answer-btn {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            color: white;
            border: none;
            padding: min(20px, 4vw) min(50px, 9vw);
            font-size: min(24px, 5vw);
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Ma Shan Zheng', cursive;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: min(12px, 2.5vw);
        }
        
        .answer-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        .call-animation {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: min(140px, 28vw);
            height: min(140px, 28vw);
            border: 3px solid #2ecc71;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
            z-index: -1;
        }
        
        @keyframes pulse {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.5);
                opacity: 0;
            }
        }
        
        .open .lid {
            transform: rotateX(-110deg);
        }
        
        .open .box-body {
            transform: scale(0.9);
            transition: transform 1s ease;
        }
        
        .open .ribbon::before {
            transform: translateX(-50%) translateY(min(-150px, -37.5vw)) scale(0.8);
            opacity: 0;
        }
        
        .open .ribbon::after {
            transform: translateX(-50%) translateY(min(-150px, -37.5vw)) scale(0.8);
            opacity: 0;
        }
        
        .open .ribbon-horizontal {
            transform: translateY(-50%) scaleX(0);
            opacity: 0;
        }
        
        .open .ribbon-vertical {
            transform: translateX(-50%) scaleY(0);
            opacity: 0;
        }
        
        .open .bow {
            transform: translateX(-50%) translateY(min(-120px, -30vw)) scale(0.8);
            opacity: 0;
        }
        
        .open .bow::before {
            transform: translateX(min(-25px, -6.25vw)) translateY(min(-90px, -22.5vw)) scale(0.8);
            opacity: 0;
        }
        
        .open .bow::after {
            transform: translateX(min(25px, 6.25vw)) translateY(min(-90px, -22.5vw)) scale(0.8);
            opacity: 0;
        }

        @media (max-width: 768px) {
            .gift-box {
                width: min(350px, 80vw);
                height: min(350px, 80vw);
            }
            
            .video-container, .light-video-container {
                padding: 15px;
            }
            
            .video-container video, .light-video-container video {
                max-height: min(500px, 70vh);
            }
            
            .buttons-wrapper {
                flex-direction: column;
                gap: min(15px, 3vw);
            }
        }

        @media (max-width: 480px) {
            .gift-box {
                width: min(300px, 85vw);
                height: min(300px, 85vw);
            }
            
            .message, .button-container {
                padding: 20px 30px;
            }
            
            .video-container, .light-video-container {
                padding: 10px;
            }
            
            .video-container video, .light-video-container video {
                max-height: min(400px, 60vh);
            }
            
            .instructions {
                white-space: normal;
                max-width: 80%;
            }
        }

        @media (max-height: 600px) {
            .gift-box {
                width: min(300px, 70vh);
                height: min(300px, 70vh);
            }
            
            .instructions {
                top: calc(50% + min(200px, 50vh));
                font-size: min(20px, 4vh);
            }
        }

        @media (orientation: landscape) and (max-height: 500px) {
            .gift-box {
                width: min(250px, 50vh);
                height: min(250px, 50vh);
            }
            
            .instructions {
                top: calc(50% + min(150px, 40vh));
                font-size: min(18px, 3vh);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="gift-box" id="giftBox">
            <div class="box">
                <div class="lid"></div>
                <div class="box-body">
                    <div class="box-front"></div>
                </div>
                <div class="ribbon">
                    <div class="ribbon-horizontal"></div>
                    <div class="ribbon-vertical"></div>
                </div>
                <div class="bow"></div>
            </div>
        </div>
        <div class="message" id="message">‰Ω†ÂáÜÂ§áÂ•Ω‰∫ÜÂêóÔºü</div>

        <div class="button-container" id="buttonContainer">
            <div class="button-title">ËØ∑ÈÄâÊã©</div>
            <div class="buttons-wrapper">
                <button class="confirm-btn" id="confirmBtn">Á°ÆÂÆö</button>
                <button class="cancel-btn" id="cancelBtn">ÂèñÊ∂à</button>
            </div>
        </div>
   
        <div class="cancel-message" id="cancelMessage">ÁåúÂà∞‰∫ÜÔºåÂ∞±Áü•ÈÅì‰Ω†Ë¶ÅÂèñÊ∂àÔºå‰∏çÂáÜÂèñÊ∂àÔºÅ</div>
    
        <div class="video-container" id="videoContainer">
            <video id="videoPlayer" autoplay playsinline></video>
        </div>
        
        <div class="light-video-container" id="lightVideoContainer">
            <video id="lightVideoPlayer" autoplay playsinline></video>
        </div>
        
        <div class="video-call-container" id="videoCallContainer">
            <div class="call-animation"></div>
            <div class="caller-info">
                <div class="caller-avatar">üéÇ</div>
                <div class="caller-details">
                    <div class="caller-name">ÁîüÊó•Á•ùÁ¶è</div>
                    <div class="call-status">ËßÜÈ¢ëÊù•Áîµ...</div>
                </div>
            </div>
            <div class="call-buttons">
                <button class="answer-btn" id="answerBtn">
                    <span>üìû</span> Êé•Âê¨
                </button>
            </div>
        </div>
        
        <div class="cake-container" id="cakeContainer">
            <div class="cake">
                <div class="cake-decoration" id="cakeDecoration"></div>
                <div class="candles-container" id="candlesContainer"></div>
                <div class="cake-top"></div>
                <div class="cake-middle"></div>
                <div class="cake-bottom">
                    <div class="cake-text">Êà¥ÁøîÔºåÁ•ù‰Ω†23Â≤ÅÁîüÊó•Âø´‰πêÔºÅÔºÅÔºÅ</div>
                </div>
            </div>
        </div>
        <div class="cake-instruction" id="cakeInstruction">ÁÇπÂáªËú°ÁÉõ!</div>
     
        <div class="instructions" id="instructions">ÁÇπÂáªÁ§ºÁâ©ÁõíÊâìÂºÄÊÉäÂñú</div>
     
        <div class="black-overlay" id="blackOverlay"></div>
       
        <div class="end-message" id="endMessage1">‰Ω†‰ª•‰∏∫ÁªìÊùü‰∫ÜÂêóÔºü</div>
        <div class="end-message2" id="endMessage2">‰∏çÔºå‰Ω†Èîô‰∫ÜÔºÅ</div>
 
    </div>

    <!-- Èü≥È¢ëÂÖÉÁ¥† -->
    <audio id="backgroundMusic" loop preload="auto">
        <source src="ËßÜÈ¢ë/ËÉåÊôØbgm.mp4" type="audio/mp4">
        <source src="ËßÜÈ¢ë/ËÉåÊôØbgm.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="openSound" preload="auto">
        <source src="ËßÜÈ¢ë/ÁõíÂ≠êÊâìÂºÄ.mp4" type="audio/mp4">
        <source src="ËßÜÈ¢ë/ÁõíÂ≠êÊâìÂºÄ.mp3" type="audio/mpeg">
    </audio>

    <audio id="confirmSound" preload="auto">
        <source src="ËßÜÈ¢ë/Á°ÆÂÆö.mp4" type="audio/mp4">
        <source src="ËßÜÈ¢ë/Á°ÆÂÆö.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="cancelSound" preload="auto">
        <source src="ËßÜÈ¢ë/Ê≤°Êúâ.mp4" type="audio/mp4">
        <source src="ËßÜÈ¢ë/Ê≤°Êúâ.mp3" type="audio/mpeg">
    </audio>
   
    <audio id="birthdayMusic" preload="auto">
        <source src="ËßÜÈ¢ë/ÁîüÊó•Âø´‰πêÊ≠å.mp4" type="audio/mp4">
        <source src="ËßÜÈ¢ë/ÁîüÊó•Âø´‰πêÊ≠å.mp3" type="audio/mpeg">
    </audio>
 
    <audio id="callMusic" preload="auto">
        <source src="ËßÜÈ¢ë/ÁîµËØù.mp4" type="audio/mp4">
        <source src="ËßÜÈ¢ë/ÁîµËØù.mp3" type="audio/mpeg">
    </audio>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const giftBox = document.getElementById('giftBox');
            const message = document.getElementById('message');
            const buttonContainer = document.getElementById('buttonContainer');
            const confirmBtn = document.getElementById('confirmBtn');
            const cancelBtn = document.getElementById('cancelBtn');
            const cancelMessage = document.getElementById('cancelMessage');
            const videoContainer = document.getElementById('videoContainer');
            const videoPlayer = document.getElementById('videoPlayer');
            const lightVideoContainer = document.getElementById('lightVideoContainer');
            const lightVideoPlayer = document.getElementById('lightVideoPlayer');
            const instructions = document.getElementById('instructions');
            const blackOverlay = document.getElementById('blackOverlay');
            const endMessage1 = document.getElementById('endMessage1');
            const endMessage2 = document.getElementById('endMessage2');
            const cakeContainer = document.getElementById('cakeContainer');
            const candlesContainer = document.getElementById('candlesContainer');
            const cakeDecoration = document.getElementById('cakeDecoration');
            const cakeInstruction = document.getElementById('cakeInstruction');
            const backgroundMusic = document.getElementById('backgroundMusic');
            const openSound = document.getElementById('openSound');
            const confirmSound = document.getElementById('confirmSound');
            const cancelSound = document.getElementById('cancelSound');
            const birthdayMusic = document.getElementById('birthdayMusic');
            const callMusic = document.getElementById('callMusic');
            
            const videoCallContainer = document.getElementById('videoCallContainer');
            const answerBtn = document.getElementById('answerBtn');
            
            let isOpen = false;
            let birthdayMusicStarted = false; 
            let audioInitialized = false;
            let isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
            
            // jsdelivr CDN ËßÜÈ¢ëË∑ØÂæÑÊï∞ÁªÑ
            const videoUrls = [
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/IMG_0005.Mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/IMG_4326.MP4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/IMG_0289.MP4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/IMG_9207.MP4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/IMG_6966.MP4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/Â∞èËâæ.mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/VID_20251117194826807.mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/IMG_5056.MP4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/IMG_3561.Mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/ÁéâÂ¶ÇÊÑè.mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/IMG_5752.Mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/VID_20251124163246967.MP4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/ÂæÆ‰ø°ËßÜÈ¢ë2025-11-24_171633_904.mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/yy.mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/hh.mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/lv_0_20251118202757.mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/e7672c6c6ef6ede0d11f5c31c63a835c.mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/Aqiu..MOV.mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/‰Ωê.MP4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/29931081b8b2349b21509c4ebb395bc1.mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/11ecf79721a80297093e6b67605c1386.mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/900e7602be07b1767152c9d9b53cf682.mp4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/d20ee2abda9ea1d26f9a64c9599edc68.mp4"
            ];
            
            const specialVideoUrls = [
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/IMG_3659.MP4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/IMG_3750.MP4",
                "https://cdn.jsdelivr.net/gh/smiling-suprise/smiling-suprise.github.io@main/ËßÜÈ¢ë/IMG_3917.MP4"
            ];
            
            let currentVideoIndex = 0;
            let currentSpecialVideoIndex = 0;
          
            // Ë∞ÉÊï¥Èü≥È¢ëÂπ≥Ë°°
            backgroundMusic.volume = 0.08;
            birthdayMusic.volume = 0.5;
            callMusic.volume = 0.5;
            openSound.volume = 0.5;
            confirmSound.volume = 0.6;
            cancelSound.volume = 0.6;
            
            // iOSÈü≥È¢ëÂàùÂßãÂåñ
            function initAudioSystem() {
                if (audioInitialized) return;
                
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                if (AudioContext) {
                    const audioContext = new AudioContext();
                    
                    document.body.addEventListener('click', function initAudio() {
                        if (audioContext.state === 'suspended') {
                            audioContext.resume();
                        }
                        document.body.removeEventListener('click', initAudio);
                    });
                }
                
                const playPromise = backgroundMusic.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log('ËÉåÊôØÈü≥‰πêÊí≠ÊîæÊàêÂäü');
                        audioInitialized = true;
                    }).catch(error => {
                        console.log('ËÉåÊôØÈü≥‰πêËá™Âä®Êí≠ÊîæÂ§±Ë¥•:', error);
                    });
                }
            }
            
            // ÂÅúÊ≠¢ÊâÄÊúâÈü≥È¢ë
            function stopAllAudio() {
                backgroundMusic.pause();
                backgroundMusic.currentTime = 0;
                birthdayMusic.pause();
                birthdayMusic.currentTime = 0;
                callMusic.pause();
                callMusic.currentTime = 0;
            }
            
            // Êí≠ÊîæÈü≥È¢ëÂπ∂Â§ÑÁêÜÈîôËØØ
            function playAudio(audioElement, onSuccess, onError) {
                if (!audioInitialized) {
                    initAudioSystem();
                }
                
                const playPromise = audioElement.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        if (onSuccess) onSuccess();
                    }).catch(error => {
                        console.log('Èü≥È¢ëÊí≠ÊîæÂ§±Ë¥•:', error);
                        if (onError) onError();
                    });
                }
            }
            
            // ‰ºòÂåñÁöÑËßÜÈ¢ëÈ¢ÑÂä†ËΩΩ
            function preloadVideos() {
                const preloadCount = Math.min(3, videoUrls.length);
                for (let i = 0; i < preloadCount; i++) {
                    preloadVideo(videoUrls[i]);
                }
                
                specialVideoUrls.forEach(url => {
                    preloadVideo(url);
                });
            }
            
            // Âçï‰∏™ËßÜÈ¢ëÈ¢ÑÂä†ËΩΩ
            function preloadVideo(url) {
                const video = document.createElement('video');
                video.src = url;
                video.preload = 'auto';
                video.load();
            }
            
            // ‰ºòÂåñiOSËßÜÈ¢ëÊí≠Êîæ
            function setupVideoForIOS(videoElement) {
                if (isIOS) {
                    videoElement.setAttribute('playsinline', '');
                    videoElement.setAttribute('webkit-playsinline', '');
                    videoElement.setAttribute('preload', 'auto');
                    videoElement.muted = false;
                    videoElement.volume = 1.0;
                }
            }
            
            window.addEventListener('load', function() {
                preloadVideos();
                
                setupVideoForIOS(videoPlayer);
                setupVideoForIOS(lightVideoPlayer);
                
                setTimeout(function() {
                    document.body.addEventListener('touchstart', function initAudioOnTouch() {
                        initAudioSystem();
                        document.body.removeEventListener('touchstart', initAudioOnTouch);
                    });
                    
                    document.body.addEventListener('click', function initAudioOnClick() {
                        initAudioSystem();
                        document.body.removeEventListener('click', initAudioOnClick);
                    });
                    
                    initAudioSystem();
                    
                }, 500);
                createSparkles();
            });
            
            function createSparkles() {
                const giftBox = document.getElementById('giftBox');
                for (let i = 0; i < 8; i++) {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.style.left = Math.random() * 100 + '%';
                    sparkle.style.top = Math.random() * 100 + '%';
                    sparkle.style.animationDelay = (Math.random() * 2) + 's';
                    giftBox.appendChild(sparkle);
                }
            }
            
            giftBox.addEventListener('click', function() {
                if (!isOpen) {
                    if (!audioInitialized) {
                        initAudioSystem();
                    }
                    
                    openSound.currentTime = 0; 
                    playAudio(openSound);
                    
                    giftBox.classList.add('open');
                    
                    instructions.style.opacity = '0';
                    
                    setTimeout(function() {
                        message.classList.add('show');
                        createConfetti();
                        setTimeout(function() {
                            message.classList.remove('show');
                            buttonContainer.classList.add('show');
                        }, 3000);
                    }, 1500);
                    
                    isOpen = true;
                }
            });
            
            confirmBtn.addEventListener('click', function() {
                confirmSound.currentTime = 0;
                playAudio(confirmSound);
                buttonContainer.classList.remove('show');
                
                giftBox.style.opacity = '0';
                giftBox.style.pointerEvents = 'none';
                giftBox.style.transition = 'opacity 0.8s ease';
         
                setTimeout(function() {
                    playNextVideo();
                }, 2000);
            });
            
            cancelBtn.addEventListener('click', function() {
                cancelSound.currentTime = 0;
                playAudio(cancelSound);
                cancelMessage.classList.add('show');
                
                setTimeout(function() {
                    cancelMessage.classList.remove('show');
                }, 2000);
            });
            
            function playNextVideo() {
                if (currentVideoIndex < videoUrls.length) {
                    try {
                        console.log('ÂáÜÂ§áÊí≠ÊîæËßÜÈ¢ë:', currentVideoIndex, videoUrls[currentVideoIndex]);
                        
                        videoPlayer.pause();
                        videoPlayer.currentTime = 0;
                        
                        videoPlayer.oncanplay = null;
                        videoPlayer.onplay = null;
                        videoPlayer.onended = null;
                        videoPlayer.onerror = null;
                        videoPlayer.onwaiting = null;
                        videoPlayer.onstalled = null;
                        videoPlayer.onloadeddata = null;
                        
                        videoPlayer.src = videoUrls[currentVideoIndex];
                        
                        videoContainer.classList.add('show');
                        
                        if (isIOS) {
                            videoPlayer.load();
                        }
                        
                        videoPlayer.oncanplay = function() {
                            console.log('ËßÜÈ¢ëÂèØ‰ª•Êí≠ÊîæÔºåÂºÄÂßãÊí≠Êîæ:', videoUrls[currentVideoIndex]);
                            videoPlayer.play().catch(function(error) {
                                console.log('ËßÜÈ¢ëÊí≠ÊîæÂ§±Ë¥•:', error);
                                handleVideoError();
                            });
                        };
                        
                        videoPlayer.onplay = function() {
                            console.log('ËßÜÈ¢ëÂºÄÂßãÊí≠Êîæ:', videoUrls[currentVideoIndex]);
                            if (audioInitialized) {
                                backgroundMusic.volume = 0.08;
                                playAudio(backgroundMusic);
                            }
                        };
                        
                        videoPlayer.onended = function() {
                            console.log('ËßÜÈ¢ëÊ≠£Â∏∏Êí≠ÊîæÁªìÊùü:', videoUrls[currentVideoIndex]);
                            handleVideoEnd();
                        };
                        
                        videoPlayer.onerror = function() {
                            console.log('ËßÜÈ¢ëÂä†ËΩΩÈîôËØØ:', videoUrls[currentVideoIndex]);
                            handleVideoError();
                        };
                        
                        videoPlayer.onwaiting = function() {
                            console.log('ËßÜÈ¢ëÁºìÂÜ≤‰∏≠...');
                        };
                        
                        videoPlayer.onstalled = function() {
                            console.log('ËßÜÈ¢ëÁºìÂÜ≤ÂÅúÊªûÔºåÂ∞ùËØïÈáçÊñ∞Âä†ËΩΩ');
                            setTimeout(function() {
                                if (videoPlayer.readyState < 3) {
                                    console.log('ËßÜÈ¢ëÁºìÂÜ≤Ë∂ÖÊó∂ÔºåÂ∞ùËØïÈáçÊñ∞Êí≠Êîæ');
                                    videoPlayer.play().catch(() => handleVideoError());
                                }
                            }, 3000);
                        };
                        
                        const loadTimeout = setTimeout(function() {
                            if (videoPlayer.readyState === 0) {
                                console.log('ËßÜÈ¢ëÂä†ËΩΩË∂ÖÊó∂ÔºåÂ∞ùËØï‰∏ã‰∏Ä‰∏™ËßÜÈ¢ë');
                                handleVideoError();
                            }
                        }, 15000);
                        
                        videoPlayer.onloadeddata = function() {
                            clearTimeout(loadTimeout);
                            console.log('ËßÜÈ¢ëÊï∞ÊçÆÂ∑≤Âä†ËΩΩ');
                        };
                        
                    } catch (error) {
                        console.log('Êí≠ÊîæËßÜÈ¢ëÊó∂Âá∫Èîô:', error);
                        handleVideoError();
                    }
                }
            }
            
            function handleVideoEnd() {
                currentVideoIndex++;
                if (currentVideoIndex < videoUrls.length) {
                    backgroundMusic.volume = 0.08;
                    setTimeout(playNextVideo, 500);
                } else {
                    videoContainer.classList.remove('show');
                    backgroundMusic.volume = 0.08;
                    setTimeout(function() {
                        showVideoCall();
                    }, 1000);
                }
            }
            
            function handleVideoError() {
                console.log('ËßÜÈ¢ëÊí≠ÊîæÂá∫ÈîôÔºåË∑≥ËøáÂΩìÂâçËßÜÈ¢ë');
                currentVideoIndex++;
                if (currentVideoIndex < videoUrls.length) {
                    backgroundMusic.volume = 0.08;
                    setTimeout(playNextVideo, 500);
                } else {
                    videoContainer.classList.remove('show');
                    backgroundMusic.volume = 0.08;
                    setTimeout(function() {
                        showVideoCall();
                    }, 1000);
                }
            }
            
            function showVideoCall() {
                videoCallContainer.classList.add('show');
                
                setTimeout(() => {
                    stopAllAudio();
                    
                    callMusic.currentTime = 0;
                    playAudio(callMusic);
                }, 300);
            }
            
            function answerVideoCall() {
                videoCallContainer.classList.remove('show');
                
                stopAllAudio();
                
                setTimeout(function() {
                    backgroundMusic.volume = 0.08;
                    playAudio(backgroundMusic);
                    playNextSpecialVideo();
                }, 1000);
            }
            
            function playNextSpecialVideo() {
                if (currentSpecialVideoIndex < specialVideoUrls.length) {
                    try {
                        console.log('ÂáÜÂ§áÊí≠ÊîæÁâπÊÆäËßÜÈ¢ë:', currentSpecialVideoIndex, specialVideoUrls[currentSpecialVideoIndex]);
                        
                        lightVideoPlayer.pause();
                        lightVideoPlayer.currentTime = 0;
                        
                        lightVideoPlayer.oncanplay = null;
                        lightVideoPlayer.onplay = null;
                        lightVideoPlayer.onended = null;
                        lightVideoPlayer.onerror = null;
                        lightVideoPlayer.onwaiting = null;
                        lightVideoPlayer.onstalled = null;
                        lightVideoPlayer.onloadeddata = null;
                        
                        lightVideoPlayer.src = specialVideoUrls[currentSpecialVideoIndex];
                        
                        lightVideoContainer.classList.add('show');

                        if (isIOS) {
                            lightVideoPlayer.load();
                        }
                        
                        lightVideoPlayer.oncanplay = function() {
                            console.log('ÁâπÊÆäËßÜÈ¢ëÂèØ‰ª•Êí≠ÊîæÔºåÂºÄÂßãÊí≠Êîæ:', specialVideoUrls[currentSpecialVideoIndex]);
                            lightVideoPlayer.play().catch(function(error) {
                                console.log('ÁâπÊÆäËßÜÈ¢ëÊí≠ÊîæÂ§±Ë¥•:', error);
                                handleSpecialVideoError();
                            });
                        };
                        
                        lightVideoPlayer.onplay = function() {
                            console.log('ÁâπÊÆäËßÜÈ¢ëÂºÄÂßãÊí≠Êîæ:', specialVideoUrls[currentSpecialVideoIndex]);
                            if (audioInitialized) {
                                backgroundMusic.volume = 0.08;
                                playAudio(backgroundMusic);
                            }
                        };
                        
                        lightVideoPlayer.onended = function() {
                            console.log('ÁâπÊÆäËßÜÈ¢ëÊ≠£Â∏∏Êí≠ÊîæÁªìÊùü:', specialVideoUrls[currentSpecialVideoIndex]);
                            handleSpecialVideoEnd();
                        };
                        
                        lightVideoPlayer.onerror = function() {
                            console.log('ÁâπÊÆäËßÜÈ¢ëÂä†ËΩΩÈîôËØØ:', specialVideoUrls[currentSpecialVideoIndex]);
                            handleSpecialVideoError();
                        };
                        
                        lightVideoPlayer.onwaiting = function() {
                            console.log('ÁâπÊÆäËßÜÈ¢ëÁºìÂÜ≤‰∏≠...');
                        };
                        
                        lightVideoPlayer.onstalled = function() {
                            console.log('ÁâπÊÆäËßÜÈ¢ëÁºìÂÜ≤ÂÅúÊªûÔºåÂ∞ùËØïÈáçÊñ∞Âä†ËΩΩ');
                            setTimeout(function() {
                                if (lightVideoPlayer.readyState < 3) {
                                    console.log('ÁâπÊÆäËßÜÈ¢ëÁºìÂÜ≤Ë∂ÖÊó∂ÔºåÂ∞ùËØïÈáçÊñ∞Êí≠Êîæ');
                                    lightVideoPlayer.play().catch(() => handleSpecialVideoError());
                                }
                            }, 3000);
                        };
                        
                        const loadTimeout = setTimeout(function() {
                            if (lightVideoPlayer.readyState === 0) {
                                console.log('ÁâπÊÆäËßÜÈ¢ëÂä†ËΩΩË∂ÖÊó∂ÔºåÂ∞ùËØï‰∏ã‰∏Ä‰∏™ËßÜÈ¢ë');
                                handleSpecialVideoError();
                            }
                        }, 15000);
                        
                        lightVideoPlayer.onloadeddata = function() {
                            clearTimeout(loadTimeout);
                            console.log('ÁâπÊÆäËßÜÈ¢ëÊï∞ÊçÆÂ∑≤Âä†ËΩΩ');
                        };
                        
                    } catch (error) {
                        console.log('Êí≠ÊîæÁâπÊÆäËßÜÈ¢ëÊó∂Âá∫Èîô:', error);
                        handleSpecialVideoError();
                    }
                } else {
                    console.log('ÊâÄÊúâÁâπÊÆäËßÜÈ¢ëÊí≠ÊîæÂÆåÊØïÔºåÊòæÁ§∫ÁªìÊùüÊ∂àÊÅØÂíåÁîüÊó•ËõãÁ≥ï');
                    lightVideoContainer.classList.remove('show');
                    backgroundMusic.volume = 0.08;
                    
                    setTimeout(function() {
                        blackOverlay.classList.add('show');
                        
                        setTimeout(function() {
                            endMessage1.classList.add('show');
                            
                            setTimeout(function() {
                                endMessage2.classList.add('show');
                               
                                setTimeout(function() {
                                    showBirthdayCake();
                                }, 2000);
                                
                            }, 2000);
                            
                        }, 2000);
                        
                    }, 1000);
                }
            }
            
            function handleSpecialVideoEnd() {
                currentSpecialVideoIndex++;
                if (currentSpecialVideoIndex < specialVideoUrls.length) {
                    backgroundMusic.volume = 0.08;
                    setTimeout(playNextSpecialVideo, 500);
                } else {
                    lightVideoContainer.classList.remove('show');
                    backgroundMusic.volume = 0.08;
                    setTimeout(function() {
                        blackOverlay.classList.add('show');
                        setTimeout(function() {
                            endMessage1.classList.add('show');
                            setTimeout(function() {
                                endMessage2.classList.add('show');
                                setTimeout(function() {
                                    showBirthdayCake();
                                }, 2000);
                            }, 2000);
                        }, 2000);
                    }, 1000);
                }
            }
            
            function handleSpecialVideoError() {
                console.log('ÁâπÊÆäËßÜÈ¢ëÊí≠ÊîæÂá∫ÈîôÔºåË∑≥ËøáÂΩìÂâçËßÜÈ¢ë');
                currentSpecialVideoIndex++;
                if (currentSpecialVideoIndex < specialVideoUrls.length) {
                    backgroundMusic.volume = 0.08;
                    setTimeout(playNextSpecialVideo, 500);
                } else {
                    lightVideoContainer.classList.remove('show');
                    backgroundMusic.volume = 0.08;
                    setTimeout(function() {
                        blackOverlay.classList.add('show');
                        setTimeout(function() {
                            endMessage1.classList.add('show');
                            setTimeout(function() {
                                endMessage2.classList.add('show');
                                setTimeout(function() {
                                    showBirthdayCake();
                                }, 2000);
                            }, 2000);
                        }, 2000);
                    }, 1000);
                }
            }
            
            answerBtn.addEventListener('click', answerVideoCall);
            
            function showBirthdayCake() {
                endMessage1.classList.remove('show');
                endMessage2.classList.remove('show');
                cakeContainer.classList.add('show');
               
                createCakeDecorations();
                createCandles();
                createCakeSparkles();
                
                setTimeout(function() {
                    cakeInstruction.classList.add('show');
                }, 1000);
            }
            
            function createCakeDecorations() {
                cakeDecoration.innerHTML = '';
                
                const colors = ['#ff6b6b', '#4ecdc4', '#ffe66d', '#ff9ff3', '#54a0ff'];
                for (let i = 0; i < 15; i++) {
                    const dot = document.createElement('div');
                    dot.className = 'decoration-dot';
                    dot.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    dot.style.left = Math.random() * 100 + '%';
                    dot.style.top = Math.random() * 100 + '%';
                    dot.style.animationDelay = (Math.random() * 3) + 's';
                    cakeDecoration.appendChild(dot);
                }
            }
        
            function createCakeSparkles() {
                const cake = document.querySelector('.cake');
                for (let i = 0; i < 12; i++) {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'cake-sparkle';
                    sparkle.style.left = Math.random() * 100 + '%';
                    sparkle.style.top = Math.random() * 100 + '%';
                    sparkle.style.animationDelay = (Math.random() * 2) + 's';
                    cake.appendChild(sparkle);
                }
            }
            
            function createCandles() {
                candlesContainer.innerHTML = '';
                
                const candle = document.createElement('div');
                candle.className = 'candle';
                candle.addEventListener('click', function() {
                    candle.classList.toggle('flame');
                    
                    cakeInstruction.classList.remove('show');
                    
                    if (candle.classList.contains('flame') && !birthdayMusicStarted) {
                        stopAllAudio();
                        
                        birthdayMusic.currentTime = 0;
                        playAudio(birthdayMusic);
                        birthdayMusicStarted = true;
                    }
                });
                candlesContainer.appendChild(candle);
            }
            
            function createConfetti() {
                const container = document.querySelector('.container');
                const colors = ['#f1c40f', '#e74c3c', '#3498db', '#2ecc71', '#9b59b6'];
                
                for (let i = 0; i < 120; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.opacity = '1';
                    container.appendChild(confetti);
                    
                    const animation = confetti.animate([
                        { transform: 'translateY(-20vh) rotate(0deg)', opacity: 1 },
                        { transform: `translateY(${80 + Math.random() * 20}vh) rotate(${360 + Math.random() * 360}deg)`, opacity: 0 }
                    ], {
                        duration: 2000 + Math.random() * 3000,
                        easing: 'cubic-bezier(0.1, 0.2, 0.8, 0.9)'
                    });
                    
                    animation.onfinish = () => confetti.remove();
                }
            }
        });
    </script>
</body>
</html>
